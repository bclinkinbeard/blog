<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<style type="text/css">

/* Global */

* {
  font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif;
  box-sizing: border-box;
  font-size: 16px;
  line-height: 1.5;
}

img {
  max-width: 100%;
  margin-bottom: 14px;
}

body {
  background-color: #ffffff;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: none;
  width: 100% !important;
  max-width: 600px !important;
  height: 100%;
  line-height: 1.6;
}

/* Hotmail classes */

.ExternalClass {
  width: 100%;
}
.ExternalClass,
.ExternalClass p,
.ExternalClass span,
.ExternalClass font,
.ExternalClass td,
.ExternalClass div {
  line-height: 100%;
}

/* Trigger view-in-browser button in Outlook */

#outlook a {
  padding: 0;
}

/* Table and cell alignment */

table {
  mso-table-lspace: 0pt;
  mso-table-rspace: 0pt;
}

table td {
  vertical-align: top;
}

/* Image fix */

img {
  -ms-interpolation-mode:bicubic;
}

/* Type */

p, ul, ol {
  margin-bottom: 14px;
  font-weight: normal;
}

ul, ol, li {
  margin-left: 0;
  margin-right: 0;
  padding-left: 0;
  padding-right: 0;
}

ul, ol {
  margin-left: 20px;
}

ol, ol li {
  list-style-type: decimal;
}

b,
strong {
  font-weight: bold;
}

h1,
h1 a {
  font-size: 20px;
  font-weight: bold;
}

h2,
h2 a {
  font-size: 16px;
  font-weight: bold;
}

h3,
h3 a {
  font-size: 16px;
  font-weight: bold;
}

h1 {
  margin: 0 0 15px 0;
  color: #222222 !important;
}
h2 {
  margin: 0 0 12px 0;
  color: #222222 !important;
}
h3 {
  margin: 0 0 14px 0;
  color: #222222 !important;
}

/* Links */

a,
a:link {
  color: #4477bd;
  text-decoration: underline;
}
a:visited {
  color: purple !important;
}
a:hover {
  color: #e2911a !important;
}
a:active {
  color: #0d3d62 !important;
}

/* Containers */

.body-wrap {
  background-color: #ffffff;
  width: 100%;
}

.container {
  display: block !important;
  max-width: 700px !important;
  overflow: visible;
  margin: 0 !important;
  clear: both !important;
}

.content {
  max-width: 700px;
  overflow: visible;
  margin: 0;
  display: block;
}

/* Main and Footer content */

.main-content {
  font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
  font-size: 16px;
  color: #222222;
  line-height: 1.5;
  padding: 25px;
}
@media only screen and (max-width: 600px) {
  *, .main-content {
    font-size: 20px;
  }
}
.main-content img {
  margin-top: 14px;
}

</style>
<style>div{max-width:100vw}pre{padding:1em}code,pre span{font-family:'Droid Sans Mono',Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace!important}code{white-space:nowrap;background:#f7f7f9;color:#de0053;border:1px solid #e1e1e1;padding:1px 3px;border-radius:3px}.editor .wrap-guide{background:rgba(255,255,255,.1)}.editor .indent-guide{color:rgba(255,255,255,.15)}.editor,.editor .gutter{background-color:#172b35;color:#adb6b4}.editor .punctuation.definition.tag.html{color:#3ab5b4}.editor.is-focused .cursor{border-color:#f8f8f0}.editor.is-focused .selection .region{background-color:#49483e}.editor.is-focused .line-number.cursor-line-no-selection{background-color:#49483e}.editor .invisible-character{color:rgba(215,215,215,.15)}.editor .comment{color:#888e9a}.editor .link,.editor .string{color:#6fbc72!important}.editor .constant.numeric{color:#ff8b47}.editor .constant.language{color:#adb6b4}.editor .constant.character,.editor .constant.other{color:#adb6b4}.editor .keyword{color:#ce90c8}.editor .storage{color:#ce90c8}.editor .storage.type{color:#ce90c8}.editor .entity.name.class{text-decoration:underline;color:#5899d1}.editor .entity.other.inherited-class{font-style:italic;text-decoration:underline;color:#5899d1}.editor .entity.name.function{color:#5899d1}.editor .entity.name.instance{color:#5899d1}.editor .variable.parameter{color:#fd971f}.editor .entity.name.tag{color:#fe5263}.editor .entity.other.attribute-name{font-style:italic;color:#ce90c8}.editor .support.function{color:#5899d1}.editor .support.constant{color:#5899d1}.editor .support.class,.editor .support.type{font-style:italic;color:#5899d1}.editor .invalid{color:#f8f8f0;background-color:#ff8b47}.editor .invalid.deprecated{color:#f8f8f0;background-color:#ae81ff}</style>
</head>
<body>
<table class="body-wrap">
  <tr>
    <td class="container">
      <div class="content">
        <table class="main" width="100%" cellpadding="0" cellspacing="0">
          <tr>
            <td class="main-content">

              <ul>
                <li><a href="#day1">Day 1</a></li>
                <li><a href="#day2">Day 2</a></li>
                <li><a href="#day3">Day 3</a></li>
                <li><a href="#day4">Day 4</a></li>
                <li><a href="#day5">Day 5</a></li>
              </ul>

              <h1><a name="day1" id="user-content-d3-day-1-building-blocks" class="anchor" href="#d3-day-1-building-blocks" aria-hidden="true"></a>D3 Day 1: Building Blocks</h1>
              <p><a href="https://d3js.org">D3.js</a> is the de facto JavaScript library for creating data visualizations on the web. Companies like <a href="https://www.nytimes.com/">The New York Times</a>, <a href="https://fivethirtyeight.com/">FiveThirtyEight</a>, <a href="https://netflix.com/">Netflix</a>, and countless others use it extensively to visualize <a href="http://www.nytimes.com/interactive/2012/10/15/us/politics/swing-history.html">complex relationships and trends</a>, examine <a href="https://projects.fivethirtyeight.com/mortality-rates-united-states/">geographic changes over time</a>, and to gain insights into mountains of internal data. Unfortunately, D3 also has a bit of a reputation as being hard to learn, but it doesn't have to be. D3 is built on a small handful of core concepts and once you know them you'll be able to understand and learn from the thousands upon thousands of examples freely available online.</p>
              <h2><a id="user-content-prerequisites" class="anchor" href="#prerequisites" aria-hidden="true"></a>Prerequisites</h2>
              <p>D3 is built on the fundamental web standards of HTML, CSS, and SVG. For the purposes of this course it is assumed you have a basic understanding of HTML and CSS. SVG will be taught from first principles as needed.</p>
              <h4><a id="user-content-html" class="anchor" href="#html" aria-hidden="true"></a>HTML</h4>
              <p>HTML and its DOM model, of course, provide the foundation on which any web based project must run. D3 provides terse APIs for interacting with the DOM, and some D3 projects are built entirely with native HTML elements. That said, most D3 visualizations create SVG output, which we'll look at below.</p>
              <h4><a id="user-content-css" class="anchor" href="#css" aria-hidden="true"></a>CSS</h4>
              <p>Whether your project targets the DOM or SVG, you will use CSS to style it. D3 provides APIs for adding and removing CSS classes as well as manipulating individual style properties, so as long as you know the basics you shouldn't have any trouble.</p>
              <h4><a id="user-content-svg" class="anchor" href="#svg" aria-hidden="true"></a>SVG</h4>
              <p><a href="https://www.w3.org/TR/SVG/">SVG</a> is a &quot;language for describing two-dimensional vector and mixed vector/raster graphics in XML&quot;. Really rolls off the tongue, doesn't it?</p>
              <p>All you really need to know is that vectors provide resolution independence, allowing you to create graphics that look good everywhere from phones to giant desktop monitors, and SVG graphics do not participate in the browser's standard layout flow.</p>
              <p>What does that mean? Well, when you create an SVG element using markup like <code>&lt;svg width=&quot;300&quot; height=&quot;300&quot;&gt;â€¦&lt;/svg&gt;</code>, that 300x300 block will appear in the browser's layout flow just like any other element. If the tag was defined after a <code>&lt;div&gt;</code> tag, the SVG will be rendered below the div. Tags defined after the SVG tag will be rendered below it. <em>Within that block</em>, however, there is no automatic layout to prevent items from overlapping. If you create two rectangles with the markup <code>&lt;rect width=&quot;50&quot; height=&quot;50&quot; /&gt;&lt;rect width=&quot;50&quot; height=&quot;50&quot; /&gt;</code> they will be rendered in the same exact spot, right on top of one another. While this may seem inconvenient at first since it means everything must be given explicit coordinates to avoid overlap, it actually provides an incredible amount of flexibility. It enables extraordinary expressiveness through layering, opacity, interactivity, and fluid animation.</p>
              <h2><a id="user-content-core-concepts" class="anchor" href="#core-concepts" aria-hidden="true"></a>Core Concepts</h2>
              <p>D3 stands for Data-Driven Documents, which really does describe its underlying philosophy. It provides a declarative API for creating and transforming a document's structure based on arbitrary underlying data.  Whether your data is a simple array of numbers or a complex graph of JSON objects and arrays, D3 enables you to transform that data into a standard web document using declarative APIs.</p>
              <p>When we say D3 is declarative, what we mean is that you tell D3 what you want, but not how you want it done. You will not write loops to create a collection of elements, you will simply describe a relationship between a set of data points and a set of UI elements, and D3 will handle the implementation details of DOM construction and manipulation. For example, to turn all of the paragraph text on your page white, you  could use the code <code>d3.selectAll('p').style('color', 'white')</code>. D3 will handle the mechanics of iterating over multiple elements and the updating of attribute values for you.</p>
              <p>While this abstraction alone is helpful in terms of productivity and avoiding browser inconsistencies, the real power comes from the integration of dynamic data. From the D3 site, &quot;styles, attributes, and other properties can be specified as <em>functions of data</em> in D3, not just simple constants&quot;. What does this look like in practice?</p>
              <p>The following code will apply the number values being passed to the <code>data()</code> method as the font size to existing paragraph elements on the page.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>selectAll</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>p</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant dom js"><span>data</span></span><span class="meta brace round js"><span>(</span></span><span class="meta brace square js"><span>[</span></span><span class="constant numeric decimal js"><span>4</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>8</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>15</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>16</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>23</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>42</span></span><span class="meta brace square js"><span>]</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>style</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>font-size</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>d</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span><span>&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;d&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>px</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></div>
              <h4><a id="user-content-selections" class="anchor" href="#selections" aria-hidden="true"></a>Selections</h4>
              <p><a href="https://d3js.org/#selections">Selections</a> are one of D3's core concepts, and understanding them will go a long way to making you feel comfortable working in D3. The next lesson is devoted entirely to selections, but these syntax examples will give you an idea of how things work and what to expect.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>select</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>#foo</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;select&nbsp;the&nbsp;element&nbsp;with&nbsp;an&nbsp;id=&quot;foo&quot;&nbsp;attribute</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>selectAll</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>.primary</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;select&nbsp;all&nbsp;elements&nbsp;on&nbsp;the&nbsp;page&nbsp;with&nbsp;a&nbsp;CSS&nbsp;class&nbsp;of&nbsp;primary</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>selectAll</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>div</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;select&nbsp;all&nbsp;divs&nbsp;on&nbsp;the&nbsp;page</span><span>&nbsp;</span></span></span></div></pre></div>
              <p><code>d3.select</code> and <code>d3.selectAll</code> operate on the page as a whole, but they return selection objects that allow you to narrow the scope of subsequent selections. For instance, if we were to change the first selector above to <code>d3.select('#foo').selectAll('p')</code> we would only get back the paragraphs that live <em>inside</em> the <code>#foo</code> element. That means you can do things like turn all your nav links red with a one-liner like <code>d3.select('nav').selectAll('a').style('color', 'red')</code>.</p>
              <p>The rabbit hole can go pretty deep, but we'll stop here for now. The next lesson is all about selections!</p>
              <h4><a id="user-content-scales" class="anchor" href="#scales" aria-hidden="true"></a>Scales</h4>
              <p>Data visualization is ultimately about transformation. Quarterly revenue becomes column height, the winning political party becomes a state's fill color on a map, and on and on. In D3 these transformations are done using scales, and they're another one of D3's core concepts.</p>
              <p>Linear scales are the most straightforward as they directly translate values from one context to another.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>percentToDecimal</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>scaleLinear</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>domain</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta brace square js"><span>[</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>100</span></span><span class="meta brace square js"><span>]</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>range</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta brace square js"><span>[</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>1</span></span><span class="meta brace square js"><span>]</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div></pre></div>
              <p>Calling <code>d3.scaleLinear()</code> will instantiate a new linear scale. We then call two methods on the scale, passing each of them a two-element array representing the minimum and maximum values. The <code>domain()</code> method is used to specify the possible input values while <code>range()</code> specifies the output values. The return value of this code is a <em>scale function</em> named <code>percentToDecimal</code>. This function will accept a percentage value and return the corresponding decimal.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta function-call js"><span class="entity name function js"><span>percentToDecimal</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;0</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="entity name function js"><span>percentToDecimal</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>50</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;0.5</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="entity name function js"><span>percentToDecimal</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>100</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;1</span><span>&nbsp;</span></span></span></div></pre></div>
              <p>Again, this is just the smallest tip of the iceberg. In lesson four we'll see how to use scales for numbers, strings, dimensions, and even colors!</p>
              <h2><a id="user-content-community-and-resources" class="anchor" href="#community-and-resources" aria-hidden="true"></a>Community and Resources</h2>
              <p>Last but not least, there are some great resources out there for learning, sharing, and exploring D3.</p>
              <p>One of the oldest and absolute best is <a href="https://bl.ocks.org/">https://bl.ocks.org/</a> by <a href="https://twitter.com/mbostock">Mike Bostock</a>, the creator of D3 itself. It's a treasure trove of <a href="https://bl.ocks.org/mbostock/4060954">cool demos</a> where the code used to create them is displayed right below the output. Each demo is backed by a GitHub Gist, so you can go to the <a href="https://gist.github.com/mbostock/4060954">original source</a>, fork it, tweak the code and play with your own version.</p>
              <p><a href="http://blockbuilder.org/">http://blockbuilder.org/</a> was created by <a href="https://twitter.com/enjalot">Ian Johnson</a> as a sort of next generation <a href="https://bl.ocks.org/">https://bl.ocks.org/</a> and will even load the <a href="http://blockbuilder.org/mbostock/4060954">same examples</a> by simply changing the domain in the URL. It has the added benefit of a code editor and live preview right there in the browser so you can tinker with a very tight feedback loop. Do not underestimate the power of changing things and seeing what happens. It can be a powerful way to learn by example!</p>
              <p>Lastly, there is a <a href="https://d3js.slack.com/">D3.js Slack group</a> that is pretty active and very welcoming. There are channels dedicated to getting help when you're stuck, the broader effort of learning D3, and many more.</p>
              <h2><a id="user-content-whew-that-was-a-lot" class="anchor" href="#whew-that-was-a-lot" aria-hidden="true"></a>Whew, that was a lot!</h2>
              <p>We covered a lot of ground for a first lesson! Next we'll go deep on selections, the build a real data-driven chart, followed by scales, margins and axes.</p>
              <p>If you have any questions at all, about something in this lesson or anything else related to D3 just hit reply. I'm here to help!</p>

              <h1><a name="day2" id="user-content-d3-day-2-selections" class="anchor" href="#d3-day-2-selections" aria-hidden="true"></a>D3 Day 2: Selections</h1>
              <p>Selections are at the heart of D3. So much so that it's literally impossible to use D3 without them. We saw a few basic examples of selections in the previous lesson.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>select</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>#foo</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;select&nbsp;the&nbsp;element&nbsp;with&nbsp;an&nbsp;id=&quot;foo&quot;&nbsp;attribute</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>selectAll</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>.primary</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;select&nbsp;all&nbsp;elements&nbsp;on&nbsp;the&nbsp;page&nbsp;with&nbsp;a&nbsp;CSS&nbsp;class&nbsp;of&nbsp;primary</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>selectAll</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>div</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;select&nbsp;all&nbsp;divs&nbsp;on&nbsp;the&nbsp;page</span><span>&nbsp;</span></span></span></div></pre></div>
              <p>We also saw how selections can be scoped by calling <code>select</code> and <code>selectAll</code> on a selection object rather than directly on <code>d3</code> itself. <code>d3.select('#foo').selectAll('p')</code> would only select paragraphs inside the <code>#foo</code> element, <code>d3.select('nav').selectAll('a')</code> would only select links within the <code>nav</code> element, and so on.</p>
              <p>Believe it or not, the examples above cover most of the ground when it comes to purely selecting elements on a page.</p>
              <table>
              <thead>
              <tr>
              <th>If you want to select</th>
              <th>One Item</th>
              <th>Multiple Items</th>
              </tr>
              </thead>
              <tbody>
              <tr>
              <td>Anywhere on the page</td>
              <td><a href="https://github.com/d3/d3-selection#select">d3.select</a></td>
              <td><a href="https://github.com/d3/d3-selection#selectAll">d3.selectAll</a></td>
              </tr>
              <tr>
              <td>Within an existing selection</td>
              <td><a href="https://github.com/d3/d3-selection#selection_select">selection.select</a></td>
              <td><a href="https://github.com/d3/d3-selection#selection_selectAll">selection.selectAll</a></td>
              </tr>
              </tbody>
              </table>
              <p>The choices in that matrix will cover 95% of your use cases when working with D3. If you've worked with  <code>document.querySelector</code> and <code>document.querySelectorAll</code> before you should feel right at home.</p>
              <p>You may notice some similarities to jQuery as you read through the code samples below. Trust me when I say the differences will be crystal clear after the next lesson.</p>
              <h2><a id="user-content-element-crud" class="anchor" href="#element-crud" aria-hidden="true"></a>Element CRUD</h2>
              <p>This is where the real fun begins. This is also where we'll learn about a common pattern in D3 APIs.</p>
              <h4><a id="user-content-selectionattrname-value" class="anchor" href="#selectionattrname-value" aria-hidden="true"></a>selection.attr(name[, value])</h4>
              <p><a href="https://github.com/d3/d3-selection#selection_attr">selection.attr</a> is for working with element attributes. When calling <code>selection.attr(name)</code> the method will act as a getter and return the <code>name</code> attribute's value. <code>selection.attr(name, value)</code> will cause the method to act as a setter, assigning <code>value</code> to the <code>name</code> attribute.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>select</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>a</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>attr</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>href</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;get&nbsp;the&nbsp;href&nbsp;value&nbsp;of&nbsp;the&nbsp;first&nbsp;link&nbsp;on&nbsp;the&nbsp;page</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>select</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>a</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>attr</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>href</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span class="markup underline link http hyperlink"><span>http://google.com</span></span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;set&nbsp;the&nbsp;first&nbsp;link&#39;s&nbsp;href&nbsp;to&nbsp;Google</span><span>&nbsp;</span></span></span></div></pre></div>
              <p><em>Methods as dual purpose getters and setters is something you will see and use a lot.</em></p>
              <p>The <code>value</code> parameter can also be specified as a function. This is useful when you need to set a dynamic value and is also extremely common in D3 code. Additionally, the functions you pass to D3 methods will almost always take the same exact form:</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>selectAll</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>p</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>attr</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>href</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>d</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>i</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>nodes</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;the&nbsp;first&nbsp;parameter&nbsp;is&nbsp;named&nbsp;d&nbsp;and&nbsp;is&nbsp;the&nbsp;node&#39;s&nbsp;data&nbsp;point,&nbsp;or&nbsp;datum</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;the&nbsp;second&nbsp;parameter&nbsp;is&nbsp;named&nbsp;i&nbsp;and&nbsp;is&nbsp;the&nbsp;node&#39;s&nbsp;index&nbsp;in&nbsp;the&nbsp;selection</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;the&nbsp;third&nbsp;parameter&nbsp;is&nbsp;an&nbsp;array&nbsp;of&nbsp;the&nbsp;nodes&nbsp;in&nbsp;the&nbsp;selection</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;lastly,&nbsp;`this`&nbsp;===&nbsp;nodes[i]</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;the&nbsp;function&nbsp;is&nbsp;bound&nbsp;to&nbsp;the&nbsp;DOM&nbsp;element,&nbsp;so&nbsp;`this`&nbsp;refers&nbsp;to&nbsp;the&nbsp;actual&nbsp;node</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div></pre></div>
              <p>I repeat, <em>you will see this everywhere</em>.</p>
              <p>It's worth noting that, because of the differences in lexical scoping, <code>this</code> will not refer to the DOM element if you use an arrow function. If you use an arrow function you will need to use <code>nodes[i]</code> to get a reference to the element.</p>
              <h4><a id="user-content-selection-style-name-value" class="anchor" href="#selection-style-name-value" aria-hidden="true"></a>selection.<strong>style</strong>(name[, value])</h4>
              <p>Look familiar? <a href="https://github.com/d3/d3-selection#selection_style">selection.style</a> is essentially a mirror image of <code>selection.attr</code>, it just deals with styles rather than attributes.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>select</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>a</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>style</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>color</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;get&nbsp;the&nbsp;text&nbsp;color&nbsp;of&nbsp;the&nbsp;first&nbsp;link</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>select</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>a</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>style</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>color</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>red</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;set&nbsp;the&nbsp;first&nbsp;link&#39;s&nbsp;text&nbsp;color&nbsp;to&nbsp;red</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>select</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>a</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>style</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>color</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>d</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>i</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>nodes</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>getColorByURL</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant dom js"><span>href</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;this&nbsp;is&nbsp;the&nbsp;native&nbsp;DOM&nbsp;element</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></div>
              <h4><a id="user-content-selectionpropertyname-value" class="anchor" href="#selectionpropertyname-value" aria-hidden="true"></a>selection.property(name[, value])</h4>
              <p><a href="https://github.com/d3/d3-selection#selection_property">selection.property</a> is for boolean properties like <code>checked</code> on checkboxes, and special properties like <code>value</code> on an <code>input</code> field. It is otherwise identical to <code>selection.attr</code> and <code>selection.style</code>.</p>
              <h4><a id="user-content-selectionclassednames-value" class="anchor" href="#selectionclassednames-value" aria-hidden="true"></a>selection.classed(names[, value])</h4>
              <p><a href="https://github.com/d3/d3-selection#selection_classed">selection.classed</a> is for getting and setting CSS class names, and yet another method that uses the pattern we keep seeing. It has a slight wrinkle, but the basics hold truthy.</p>
              <p>The first parameter is <code>names</code> rather than <code>name</code>, because you can specify a space-separated list of class names. Since CSS classes are either applied or they're not, <code>value</code> should be coercible to a boolean, or a function that returns something coercible to a boolean.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>select</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>#submitBtn</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>classed</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>btn-lg</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;does&nbsp;submitBtn&#39;s&nbsp;classList&nbsp;include&nbsp;btn-lg?</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>select</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>#submitBtn</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>classed</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>btn&nbsp;btn-lg</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant language boolean true js"><span>true</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;apply&nbsp;the&nbsp;btn&nbsp;and&nbsp;btn-lg&nbsp;classes</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>selectAll</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>button</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>classed</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>btn</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>d</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>i</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>nodes</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;i&nbsp;</span><span class="keyword operator comparison js"><span>&lt;</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>3</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;apply&nbsp;the&nbsp;btn&nbsp;class&nbsp;to&nbsp;the&nbsp;first&nbsp;3&nbsp;buttons</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div></pre></div>
              <p>Note that most of the time you will see classes applied using the <code>selection.attr('class', 'btn btn-lg')</code> syntax. This is functionally identical to <code>selection.classed('btn btn-lg', true)</code>, but <code>selection.classed</code> is generally reserved for cases where a class is being conditionally applied or toggled on and off.</p>
              <h4><a id="user-content-selectiontextvalue--selectionhtmlvalue" class="anchor" href="#selectiontextvalue--selectionhtmlvalue" aria-hidden="true"></a>selection.text([value]) &amp;&amp; selection.html([value])</h4>
              <p>These methods are essentially aliases. <a href="https://github.com/d3/d3-selection#selection_text">selection.text</a> for <code>innerText</code> and <a href="https://github.com/d3/d3-selection#selection_html">selection.html</a> for <code>innerHTML</code>.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>select</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>#someDiv</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant dom js"><span>text</span></span><span class="meta brace round js"><span>(</span><span>)</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;get&nbsp;the&nbsp;innerText&nbsp;of&nbsp;#someDiv</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>select</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>#someDiv</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant dom js"><span>text</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>Hello&nbsp;World!</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;set&nbsp;the&nbsp;innerText&nbsp;of&nbsp;#someDiv</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>select</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>#someDiv</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>html</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;get&nbsp;the&nbsp;innerHTML&nbsp;of&nbsp;#someDiv</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>select</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>#someDiv</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>html</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>&lt;h2&gt;Hello&nbsp;World!&lt;/h2&gt;</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;set&nbsp;the&nbsp;innerHTML&nbsp;of&nbsp;#someDiv</span><span>&nbsp;</span></span></span></div></pre></div>
              <h4><a id="user-content-selectionappendtype--selectioninserttype-before" class="anchor" href="#selectionappendtype--selectioninserttype-before" aria-hidden="true"></a>selection.append(type) &amp;&amp; selection.insert(type[, before])</h4>
              <p><a href="https://github.com/d3/d3-selection#selection_append">selection.append</a> accepts a tag name or a function, and will create a new element and attach it as the last child of each node in the selection. For example, <code>d3.select('body').append('p')</code> will add a paragraph to the end of the page, but <code>d3.selectAll('p').append('span')</code> will add a <code>span</code> to every paragraph on the page.</p>
              <p>Similarly, <a href="https://github.com/d3/d3-selection#selection_insert">selection.insert</a> takes an optional <code>before</code> parameter, allowing you to pass selector strings like <code>:first-child</code> to have the new item inserted before the first child of each item in the selection. If you don't provide the <code>before</code> parameter, <code>selection.insert</code> will behave just like <code>selection.append</code>.</p>
              <h4><a id="user-content-selectionremove" class="anchor" href="#selectionremove" aria-hidden="true"></a>selection.remove()</h4>
              <p>Can you guess what <a href="https://github.com/d3/d3-selection#selection_remove">selection.remove</a> does? That's right, it removes any elements in the selection from the DOM.</p>
              <h2><a id="user-content-handling-events" class="anchor" href="#handling-events" aria-hidden="true"></a>Handling Events</h2>
              <p>Last but not least there is <a href="https://github.com/d3/d3-selection#selection_on">selection.on(type, listener)</a>. This allows you to create simple event handlers by passing a <a href="https://developer.mozilla.org/en-US/docs/Web/Events#Standard_events">DOM event type</a> and a handler function.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>selectAll</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>button</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>on</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>click</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;handleButtonClicks</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>select</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>body</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>on</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>mousemover</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;trackMousePosition</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div></pre></div>
              <p>There's a lot more about <a href="https://github.com/d3/d3-selection#handling-events">event handling</a> in the docs, but just knowing the <code>on</code> method will get you well on your way.</p>
              <h2><a id="user-content-are-we-done-yet" class="anchor" href="#are-we-done-yet" aria-hidden="true"></a>Are We Done Yet?!</h2>
              <p>Yes, we are done for today. Sit back, relax, and ruminate on your newfound knowledge! Also, don't worry if this all feels a bit overwhelming. It's hard to digest this much information in a single sitting, but my hope is that by having seen it you will be better equipped to review and tinker with code samples around the web.</p>
              <p>Worried that something isn't clicking like you think it should? Feel like something above was explained poorly? Please let me know! This is a lot of new stuff, and I want to help you make sense of it.</p>
              <p>More next time!</p>

              <h1><a name="day3" id="user-content-d3-day-3-building-a-real-bar-chart" class="anchor" href="#d3-day-3-building-a-real-bar-chart" aria-hidden="true"></a>D3 Day 3: Building a real bar chart</h1>
              <p>Fundamentals are important but let's face it, you're learning D3 so you can build cool stuff, right? Maybe an animated bar chart like this one?</p>
              <p><img src="http://i.imgur.com/nCqiNK4.gif" alt="Animated bar chart"></p>
              <p>Well do I have good news for you! ðŸ˜† By the end of today's lesson you'll have done just that, and you'll actually <em>understand how it works</em>.</p>
              <h2><a id="user-content-driving-with-data" class="anchor" href="#driving-with-data" aria-hidden="true"></a>Driving with data</h2>
              <p>In the previous lesson I mentioned that some D3 APIs resemble jQuery, and that's true when you are getting and setting simple values. But when it comes to controlling a document or visualization based on underlying data, D3's power and expressiveness are truly unparalleled.</p>
              <p>Remember, D3 stands for Data-Driven Documents. The way you do that is by <em>joining data and selections</em>. The fundamental API for this is <a href="https://github.com/d3/d3-selection#selection_data">selection.data</a> which accepts an array of data items and joins them to the DOM elements in the selection.</p>
              <p>Take the following bit of HTML:</p>
              <div class="highlight html"><pre class="editor editor-colors"><div class="line"><span class="text html basic"><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag block any html"><span>div</span></span><span>&nbsp;</span><span class="meta attribute-with-value id html"><span class="entity other attribute-name id html"><span>id</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span class="meta toc-list id html"><span>chart</span></span><span class="punctuation definition string end html"><span>&quot;</span></span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;</span><span class="meta tag any html"><span class="punctuation definition tag html"><span>&lt;</span></span><span class="entity name tag html"><span>div</span></span><span class="punctuation definition tag html"><span>&gt;</span><span class="meta scope between-tag-pair html"><span>&lt;</span></span><span>/</span></span><span class="entity name tag html"><span>div</span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;</span><span class="meta tag any html"><span class="punctuation definition tag html"><span>&lt;</span></span><span class="entity name tag html"><span>div</span></span><span class="punctuation definition tag html"><span>&gt;</span><span class="meta scope between-tag-pair html"><span>&lt;</span></span><span>/</span></span><span class="entity name tag html"><span>div</span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;</span><span class="meta tag any html"><span class="punctuation definition tag html"><span>&lt;</span></span><span class="entity name tag html"><span>div</span></span><span class="punctuation definition tag html"><span>&gt;</span><span class="meta scope between-tag-pair html"><span>&lt;</span></span><span>/</span></span><span class="entity name tag html"><span>div</span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;</span><span class="meta tag any html"><span class="punctuation definition tag html"><span>&lt;</span></span><span class="entity name tag html"><span>div</span></span><span class="punctuation definition tag html"><span>&gt;</span><span class="meta scope between-tag-pair html"><span>&lt;</span></span><span>/</span></span><span class="entity name tag html"><span>div</span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;</span><span class="meta tag any html"><span class="punctuation definition tag html"><span>&lt;</span></span><span class="entity name tag html"><span>div</span></span><span class="punctuation definition tag html"><span>&gt;</span><span class="meta scope between-tag-pair html"><span>&lt;</span></span><span>/</span></span><span class="entity name tag html"><span>div</span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag block any html"><span>div</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div></pre></div>
              <p>We can populate those empty divs by selecting them and then joining data.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>data</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>90</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>70</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>50</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>30</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>10</span></span><span>&nbsp;</span><span class="meta brace square js"><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>select</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>#chart</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>selectAll</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>div</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant dom js"><span>data</span></span><span class="meta brace round js"><span>(</span></span><span>data</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;pair&nbsp;each&nbsp;number&nbsp;in&nbsp;the&nbsp;array&nbsp;with&nbsp;an&nbsp;empty&nbsp;div</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>attr</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>class</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>bar</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;color,&nbsp;height,&nbsp;and&nbsp;spacing&nbsp;via&nbsp;CSS</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>style</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>width</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>d</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;d&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>px</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;use&nbsp;the&nbsp;data&nbsp;items&nbsp;as&nbsp;pixel&nbsp;widths</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></div>
              <p><a href="https://codepen.io/bclinkinbeard/pen/QgzGzL">Check it out for yourself</a> and you'll see this:</p>
              <p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fhog3pbp0lj307x0653yf.jpg" alt=""></p>
              <p>What has happened is that D3 has assigned each item in our <code>data</code> array to one of the empty divs in the selection. By default, items will be matched based on index. That's why the first div was given a width of 90, the second 70, etc.</p>
              <p>Sweet! You built your first bar chart with D3!</p>
              <h4><a id="user-content-whats-with-those-empty-divs" class="anchor" href="#whats-with-those-empty-divs" aria-hidden="true"></a>What's with those empty divs?</h4>
              <p>OK, so, we kind of cheated a little bit. In the example above, there just so happened to be five empty divs in the <code>#chart</code> container and five items in our data array. I know, what are the odds, right?</p>
              <p>Let's talk about how things will work in the real world. D3 has a concept called the <a href="https://github.com/d3/d3-selection#selection_enter">enter selection</a> that represents the data items that could not be paired with existing DOM elements.</p>
              <p>A more realistic starting point for the HTML would be <code>&lt;div id=&quot;chart&quot;&gt;&lt;/div&gt;</code>, a single, empty div. In that case, our existing code of <code>d3.select('#chart').selectAll('div').data(data)</code> would return an empty selection since there are no divs inside <code>#chart</code>. However, that new selection has an <code>enter()</code> method which returns the enter selection. Since the enter selection represents data items in need of DOM elements, we can use it to create exactly that.</p>
              <p>Let's update our previous example to take advantage of the enter selection, allowing us to target an empty container like <code>&lt;div id=&quot;chart&quot;&gt;&lt;/div&gt;</code>.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>select</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>#chart</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>selectAll</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>div</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant dom js"><span>data</span></span><span class="meta brace round js"><span>(</span></span><span>data</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>enter</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;gimme&nbsp;the&nbsp;enter&nbsp;selection&nbsp;and&nbsp;those&nbsp;poor&nbsp;orphaned&nbsp;data&nbsp;items</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>append</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>div</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;create&nbsp;and&nbsp;append&nbsp;a&nbsp;new&nbsp;div&nbsp;for&nbsp;each&nbsp;data&nbsp;item</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>attr</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>class</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>bar</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>style</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>width</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>d</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;d&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>px</span><span class="punctuation definition string end js"><span>&#39;</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></div>
              <p>Looks familiar, eh? The only changes from our first example are the two commented lines.</p>
              <p><em>Every single chart you create will include this pattern.</em> <code>selection.data</code> will pretty much always be followed by a call to <code>enter()</code>, and that will always be followed by a call to <code>append()</code>. In fact, if your data doesn't change after your page loads, you're basically done.</p>
              <p>By the way, remember how we talked about declarative code and telling D3 <em>what you want</em>, but not <em>how to do something</em>? That is exactly what we're doing here. We are not looping over the data, we are not telling D3 how many elements we want. We are simply saying &quot;The divs and data go together. You figure out the details.&quot;</p>
              <h2><a id="user-content-dynamic-charts" class="anchor" href="#dynamic-charts" aria-hidden="true"></a>Dynamic charts</h2>
              <p>What if your chart's data changes after the initial render? In that case we can follow the same basic pattern as above, we'll just need to reset the container each time we render new data. For this example we'll use a slightly more complex set of data. Here we have an array of students who each have a name and two different scores.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>data</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;name</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>Alice</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;math</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>93</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;science</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>84</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;name</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>Bobby</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;math</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>81</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;science</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>97</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;name</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>Carol</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;math</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>74</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;science</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>88</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;name</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>David</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;math</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>64</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;science</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>76</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;name</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>Emily</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;math</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>80</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;science</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>94</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace square js"><span>]</span></span></span></div></pre></div>
              <p>We'll also put a couple of buttons on the page to use for switching which subject is being rendered.</p>
              <div class="highlight html"><pre class="editor editor-colors"><div class="line"><span class="text html basic"><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>button</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>onclick</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>render(&#39;math&#39;)</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>Math</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>button</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>button</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>onclick</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>render(&#39;science&#39;)</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>Science</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>button</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div></pre></div>
              <p>Notice that the strings we pass to the <code>render</code> function match the property names in our data objects. Now all that's left is to implement the render function, which should look pretty familiar.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>render</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>subject</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>select</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>#chart</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;within&nbsp;the&nbsp;#chart&nbsp;container...</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>selectAll</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>div</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;select&nbsp;all&nbsp;the&nbsp;divs</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>remove</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;and&nbsp;remove&nbsp;them,&nbsp;clearing&nbsp;the&nbsp;#chart&nbsp;div</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;now&nbsp;just&nbsp;repeat&nbsp;our&nbsp;creation&nbsp;pattern&nbsp;from&nbsp;the&nbsp;first&nbsp;example</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>select</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>#chart</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>selectAll</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>div</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant dom js"><span>data</span></span><span class="meta brace round js"><span>(</span></span><span>data</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>enter</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>append</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>div</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>attr</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>class</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>bar</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>style</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>width</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>d</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;d</span><span class="meta brace square js"><span>[</span></span><span>subject</span><span class="meta brace square js"><span>]</span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>px</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;use&nbsp;the&nbsp;subject&nbsp;passed&nbsp;in&nbsp;to&nbsp;grab&nbsp;the&nbsp;correct&nbsp;property</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="entity name function js"><span>render</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>math</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;render&nbsp;the&nbsp;math&nbsp;data&nbsp;when&nbsp;the&nbsp;page&nbsp;first&nbsp;loads</span><span>&nbsp;</span></span></span></div></pre></div>
              <p>You can <a href="https://codepen.io/bclinkinbeard/pen/mwGgzK?editors=0010">check out the live example</a> and click the buttons to switch subjects! No page reload necessary, D3 simply updates the necessary DOM elements and you have a dynamically changing bar chart.</p>
              <h2><a id="user-content-uhh-thats-not-animated" class="anchor" href="#uhh-thats-not-animated" aria-hidden="true"></a>Uhh, that's not animated</h2>
              <p>I know, I know. We're getting there. Thankfully, there are only a few tweaks we need to make to animate our chart updates.</p>
              <p>In our previous example we just deleted the chart and redrew it each time the data changed. That's the quickest and easiest way to do things, but it's not compatible with animated transitions. After all, if we want a bar to animate from one size to another, deleting it is not exactly a helpful first step.</p>
              <p>The key to reusing elements instead of deleting them is actually called a <em>key function</em>, and it's the optional second argument when calling <code>selection.data</code>. The purpose of a key function is to ensure the same DOM element will render the same data item between renders, overriding the default match-by-index behavior we've previously seen. In practice this is done by referencing a property that is consistent between updates, which in our case is the name property.</p>
              <div class="highlight diff"><pre class="editor editor-colors"><div class="line"><span class="source diff"><span class="markup deleted diff"><span class="punctuation definition deleted diff"><span>-</span></span><span>&nbsp;.data(data)</span></span></span></div><div class="line"><span class="source diff"><span class="markup inserted diff"><span class="punctuation definition inserted diff"><span>+</span></span><span>&nbsp;.data(data,&nbsp;function(d)&nbsp;{&nbsp;return&nbsp;d.name&nbsp;})</span></span></span></div></pre></div>
              <p>Let's look at an updated version of our <code>render</code> function.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>render</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>subject</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;store&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;bars&nbsp;already&nbsp;on&nbsp;the&nbsp;chart</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>bars</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>select</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>#chart</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>selectAll</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>div</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;this&nbsp;won&#39;t&nbsp;be&nbsp;empty&nbsp;after&nbsp;the&nbsp;first&nbsp;time&nbsp;this&nbsp;function&nbsp;runs</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant dom js"><span>data</span></span><span class="meta brace round js"><span>(</span></span><span>data</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>d</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="variable other object js"><span>d</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant dom js"><span>name</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;use&nbsp;the&nbsp;name&nbsp;property&nbsp;to&nbsp;match&nbsp;across&nbsp;updates</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>newBars</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>bars</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>enter</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;use&nbsp;the&nbsp;enter&nbsp;selection</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>append</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>div</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;to&nbsp;add&nbsp;new&nbsp;bars&nbsp;for&nbsp;any&nbsp;data&nbsp;items&nbsp;without&nbsp;an&nbsp;existing&nbsp;DOM&nbsp;element</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>attr</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>class</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>bar</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>style</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>width</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;set&nbsp;the&nbsp;initial&nbsp;width&nbsp;to&nbsp;0</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;combine&nbsp;the&nbsp;selections&nbsp;of&nbsp;new&nbsp;and&nbsp;existing&nbsp;bars</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;so&nbsp;you&nbsp;can&nbsp;act&nbsp;on&nbsp;them&nbsp;together</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>newBars</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>merge</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>bars</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>transition</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;animate&nbsp;everything&nbsp;that&nbsp;comes&nbsp;after&nbsp;this&nbsp;line!</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>style</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>width</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>d</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;d</span><span class="meta brace square js"><span>[</span></span><span>subject</span><span class="meta brace square js"><span>]</span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>px</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;set&nbsp;the&nbsp;width&nbsp;like&nbsp;normal!</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre></div>
              <p>That's it! Sit back and bask in the glory of creating <a href="https://codepen.io/bclinkinbeard/pen/dRqLQZ">an animated bar chart in D3</a>!</p>
              <h2><a id="user-content-additional-resources" class="anchor" href="#additional-resources" aria-hidden="true"></a>Additional Resources</h2>
              <p>We covered a lot of ground today. Also, full disclosure, I glossed over some things to avoid going too far down the rabbit hole. If you feel comfortable with where we ended up that's fantastic. In the next two lessons we'll just be fleshing out this example to make it more flexible and polished, but you're over the biggest hurdle.</p>
              <p>On the other hand, if you're the type of person that likes to really dig in and learn the underlying mechanics, I've collected a few links for you. These resources are a great way to dive deeper, but you definitely shouldn't feel obligated to do so.</p>
              <ul>
              <li><a href="https://bost.ocks.org/mike/join/">Thinking with Joins</a></li>
              <li><a href="https://github.com/d3/d3-selection/blob/master/README.md#joining-data">Joining Data</a></li>
              <li><a href="https://bost.ocks.org/mike/constancy/">Object Constancy</a></li>
              </ul>
              <p>Either way, if you have any questions at all, hit reply and let me know if there's something I can clear up!</p>

              <h1><a name="day4" id="user-content-d3-day-4-scales" class="anchor" href="#d3-day-4-scales" aria-hidden="true"></a>D3 Day 4: Scales</h1>
              <p>In the previous lesson we got our first taste of data-driven documents. We took a set of objects representing students and scores and we turned them into bars on a web page. The final output can take a million different forms, but the fundamental tasks of transformation and representation are the core of data visualization.</p>
              <p>In our example, however, we mostly relied on representation. We directly used the test scores to set our bar widths, resulting in this tiny chart hiding in the corner. It looks so lonely! Why not stretch out and relax, little bar chart buddy?</p>
              <p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fhnjxne5dzj30dp092glm.jpg" alt=""></p>
              <p>Lucky for us, another one of D3â€™s fundamental concepts is devoted entirely to transformations. Today weâ€™re going to learn about scales, and weâ€™ll use them to turn our meek little bar chart into a hulking beast capable of growing as big as you tell it.</p>
              <p>Before we start bulking things up though, I want to walk you through the basics. Scales will be a key aspect of every project you create, so itâ€™s worth the effort to make sure you really understand them.</p>
              <h2><a id="user-content-anatomy-of-a-scale" class="anchor" href="#anatomy-of-a-scale" aria-hidden="true"></a>Anatomy of a scale</h2>
              <p>D3 provides more than 10 types of scales, but they all have two common, fundamental parts: a domain and a range. We'll start with <a href="https://github.com/d3/d3-scale#linear-scales">linear scales</a> because they do a direct, proportional mapping from one context to another.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;instantiate&nbsp;a&nbsp;new&nbsp;linear&nbsp;scale</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;we&nbsp;expect&nbsp;the&nbsp;input&nbsp;values&nbsp;to&nbsp;be&nbsp;between&nbsp;0&nbsp;and&nbsp;100</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;and&nbsp;we&nbsp;want&nbsp;to&nbsp;transform&nbsp;them&nbsp;to&nbsp;values&nbsp;between&nbsp;0&nbsp;and&nbsp;1</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>percentToDecimal</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>scaleLinear</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>domain</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta brace square js"><span>[</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>100</span></span><span class="meta brace square js"><span>]</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>range</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta brace square js"><span>[</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>1</span></span><span class="meta brace square js"><span>]</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div></pre></div>
              <p>When you create a scale the return value is a <em>scale function</em>. This function will accept a value from the configured <code>domain</code> and return the corresponding value from the <code>range</code>.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta function-call js"><span class="entity name function js"><span>percentToDecimal</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;0</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="entity name function js"><span>percentToDecimal</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>50</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;0.5</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="entity name function js"><span>percentToDecimal</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>100</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;1</span><span>&nbsp;</span></span></span></div></pre></div>
              <p><strong>Reversible</strong></p>
              <p>What if we wanted to go the other way? One option would be to create another scale, with the domain and range swapped.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>decimalToPercent</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>scaleLinear</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>domain</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta brace square js"><span>[</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>1</span></span><span class="meta brace square js"><span>]</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>range</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta brace square js"><span>[</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>100</span></span><span class="meta brace square js"><span>]</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;now&nbsp;we&nbsp;can&nbsp;go&nbsp;the&nbsp;other&nbsp;way</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="entity name function js"><span>decimalToPercent</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>0</span><span class="meta delimiter decimal period js"><span>.</span></span><span>5</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;50</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="entity name function js"><span>decimalToPercent</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>1</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;100</span><span>&nbsp;</span></span></span></div></pre></div>
              <p>Another way is to use the <a href="https://github.com/d3/d3-scale#continuous_invert">invert</a> method. The invert method will accept a value from the range and return the corresponding value from the domain. Using our original scale function <code>percentToDecimal</code>, we can now convert decimals to percents as well.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="variable other object js"><span>percentToDecimal</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>invert</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;0</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>percentToDecimal</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>invert</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>0</span><span class="meta delimiter decimal period js"><span>.</span></span><span>5</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;50</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>percentToDecimal</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>invert</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>1</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;100</span><span>&nbsp;</span></span></span></div></pre></div>
              <p><strong>What about outliers?</strong></p>
              <p>When we defined <code>percentToDecimal</code>, we said the domain (possible input values) would fall between 0 and 100. But there is nothing stopping anyone from passing values outside those bounds to the function, so let's see what happens.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta function-call js"><span class="entity name function js"><span>percentToDecimal</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="keyword operator js"><span>-</span></span><span class="constant numeric decimal js"><span>10</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;-0.1</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="entity name function js"><span>percentToDecimal</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>150</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;1.5</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="entity name function js"><span>percentToDecimal</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>200</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;2</span><span>&nbsp;</span></span></span></div></pre></div>
              <p>Hmm. Nothing blew up, but now the return values are outside the range we defined. Depending on what you're using your scale for, that might be just fine. But what if your scale is determining the width of bars on a chart? A bar can't have a negative width, and you don't want it running off the right side of your chart either.</p>
              <p>In these scenarios you can call the <a href="https://github.com/d3/d3-scale#continuous_clamp">clamp</a> method on your scale to prevent it from returning anything outside the defined range.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>percentToDecimal</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>scaleLinear</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>domain</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta brace square js"><span>[</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>100</span></span><span class="meta brace square js"><span>]</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>range</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta brace square js"><span>[</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>1</span></span><span class="meta brace square js"><span>]</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>clamp</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="entity name function js"><span>percentToDecimal</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="keyword operator js"><span>-</span></span><span class="constant numeric decimal js"><span>10</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;0</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="entity name function js"><span>percentToDecimal</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>150</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;1</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="entity name function js"><span>percentToDecimal</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>200</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;1</span><span>&nbsp;</span></span></span></div></pre></div>
              <p><strong>That's it.</strong></p>
              <p>This is not an exhaustive look at scales, of course, but those are the fundamentals. If the idea of converting from one context to another, in either direction, and handling outlier data makes sense, congratulations, you understand scales.</p>
              <h2><a id="user-content-scales-in-practice" class="anchor" href="#scales-in-practice" aria-hidden="true"></a>Scales in practice</h2>
              <p>The most common use for scales is adapting charts to fill the available space. In the previous lesson we saw code that used test scores as column widths: <code>.style('width', function(d) { return d[subject] + 'px' })</code>. This certainly works, but it produces a pretty small chart. What if we wanted our chart to be 600 pixels wide? The test scores we're plotting will always be between 0 and 100, but we need our bars to potentially be much wider. Scales to the rescue!</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;specify&nbsp;chart&nbsp;dimensions</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>width</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>600</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>height</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>400</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;create&nbsp;a&nbsp;scale&nbsp;to&nbsp;map&nbsp;scores&nbsp;to&nbsp;bar&nbsp;widths</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;test&nbsp;scores&nbsp;are&nbsp;stored&nbsp;as&nbsp;percentages</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;a&nbsp;score&nbsp;of&nbsp;100&nbsp;should&nbsp;create&nbsp;a&nbsp;full-width&nbsp;bar</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>xScale</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>scaleLinear</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>domain</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta brace square js"><span>[</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>100</span></span><span class="meta brace square js"><span>]</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>range</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta brace square js"><span>[</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;width</span><span class="meta brace square js"><span>]</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>select</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>body</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>selectAll</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>div</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant dom js"><span>data</span></span><span class="meta brace round js"><span>(</span></span><span>data</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>enter</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>append</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>div</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>style</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>width</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>d</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;pass&nbsp;the&nbsp;score&nbsp;through&nbsp;the&nbsp;linear&nbsp;scale&nbsp;function</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>xScale</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>d</span><span class="meta brace square js"><span>[</span></span><span>subject</span><span class="meta brace square js"><span>]</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>px</span><span class="punctuation definition string end js"><span>&#39;</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></div>
              <p>Now instead of our bars always being 0 to 100 pixels wide they will be from 0 to 600 pixels wide. A score of 50 will produce a width of 300, etc.</p>
              <p><strong>What about that height?</strong></p>
              <p>To calculate the height of our bars we need to use a special type of scale called a <a href="https://github.com/d3/d3-scale#band-scales">band scale</a>. Band scales are specifically for bar and column charts, and ours looks like this.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>yScale</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>scaleBand</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>domain</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>data</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>map</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>d</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span><span>&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="variable other object js"><span>d</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant dom js"><span>name</span></span><span>&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>range</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta brace square js"><span>[</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;height</span><span class="meta brace square js"><span>]</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div></pre></div>
              <p>The domain of band scales takes the full list of values that will be present, so we create an array of the student names in our dataset. Since we want our bands to fill the specified height we use that value to set the range.</p>
              <p>We can then set our bar heights by calling a method directly on the band scale.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>style</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>height</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>d</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="variable other object js"><span>yScale</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>bandwidth</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>px</span><span class="punctuation definition string end js"><span>&#39;</span></span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></div>
              <p>The scale knows how many values there are and how much space is available. That means it can calculate how big each element should be, and we get that value by calling the <code>bandwidth()</code> method.</p>
              <p><strong>Let's see it</strong></p>
              <p>You can see all of these things <a href="https://codepen.io/bclinkinbeard/pen/awaxPp?editors=0010">applied to our bar chart here</a>. Check it out and play with the <code>width</code> and <code>height</code> definitions and see if you can anticipate how the output will change.</p>
              <h2><a id="user-content-thats-basically-it" class="anchor" href="#thats-basically-it" aria-hidden="true"></a>That's basically it</h2>
              <p>Not too bad, right? There are many more scale types in D3 (and you can roll your own!) but they all follow this same basic formula. You pick a scale type, define what type of data will go in and what should come out, and in return you get a function that will convert values in the manner you specified.</p>
              <p>Once you understand these fundamental building blocks you are well on your way to being productive with D3 scales! As always, let me know if you have questions!</p>

              <h1><a name="day5" id="user-content-d3-day-5-adding-context-with-axes" class="anchor" href="#d3-day-5-adding-context-with-axes" aria-hidden="true"></a>D3 Day 5: Adding context with axes</h1>
              <p>Welcome to Day 5! Today's lesson is the last in our series. ðŸ˜¢ On the bright side, we get to put the finishing touches on our bar chart by adding some proper axes!</p>
              <p>To recap our progress up to this point, we learned the fundamental concept of D3 selections, put it into practice to create a bar chart, and then learned about scales, another core concept in D3.</p>
              <p>At the end of our last lesson we had a nice bar chart that can be sized to any dimensions we please. It was a great step forward, but weâ€™re still lacking context. Based on the output alone there is no way to know what the bars represent. Are we looking at countries and their populations? Factories and their production capacities?</p>
              <p>Avoiding those types of questions is the job of axes. By the time weâ€™re done today, our chart will look like this gem.</p>
              <p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fhncwfwcxvj30hg0bwdgb.jpg" alt="day5-final"></p>
              <h2><a id="user-content-axes-come-from-scales" class="anchor" href="#axes-come-from-scales" aria-hidden="true"></a>Axes come from scales</h2>
              <p>In the previous lesson we defined our dimensions and created scales to control the size of our chart. As a reminder, this is what that code looked like.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;specify&nbsp;chart&nbsp;dimensions</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>width</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>600</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>height</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>400</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;create&nbsp;a&nbsp;scale&nbsp;to&nbsp;map&nbsp;scores&nbsp;to&nbsp;widths</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>xScale</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>scaleLinear</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>domain</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta brace square js"><span>[</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>100</span></span><span class="meta brace square js"><span>]</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>range</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta brace square js"><span>[</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;width</span><span class="meta brace square js"><span>]</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;create&nbsp;a&nbsp;scale&nbsp;to&nbsp;calculate&nbsp;bar&nbsp;height</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>yScale</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>scaleBand</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>domain</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>data</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>map</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>d</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span><span>&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="variable other object js"><span>d</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant dom js"><span>name</span></span><span>&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>range</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta brace square js"><span>[</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;height</span><span class="meta brace square js"><span>]</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div></pre></div>
              <p>The good news is that creating axes is just a matter of passing our scales into some built-in D3 methods. The not-exactly-good-but-don't-sweat-it news is that D3's axes must be built using SVG, and we've not really covered that yet.</p>
              <p>Welcome to your SVG crash course, it's really not that bad. The first thing we'll do is create the SVG tag itself inside our <code>#chart</code> container div.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>svg</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>select</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>#chart</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>append</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>svg</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>attr</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>width</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;width</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>attr</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>height</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;height</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>style</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>position</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>absolute</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>style</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>top</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></div>
              <p>Given our dimensions defined earlier, this will give us the following markup.</p>
              <div class="highlight html"><pre class="editor editor-colors"><div class="line"><span class="text html basic"><span class="meta tag any html"><span class="punctuation definition tag html"><span>&lt;</span></span><span class="entity name tag html"><span>svg</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>width</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>600</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>height</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>400</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag html"><span>&gt;</span><span class="meta scope between-tag-pair html"><span>&lt;</span></span><span>/</span></span><span class="entity name tag html"><span>svg</span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div></pre></div>
              <p>Notice that weâ€™re also using styles to absolutely position the SVG element. We need to do this so itâ€™s not laid out further down the page, after the bar divs. Absolute positioning will cause our SVG element to effectively be laid directly on top of the bars. This wouldnâ€™t be necessary if we had built a pure SVG chart, which is actually more common (but also more difficult) than using divs like we did. Should we could cover that in a future course?</p>
              <p>Next we can create the axes using the built-in methods D3 provides.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="variable other object js"><span>svg</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>append</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>g</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>call</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>axisBottom</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>xScale</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>svg</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>append</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>g</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>call</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>axisLeft</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>yScale</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div></pre></div>
              <p>Each line starts with <code>svg.append('g')</code>, which creates an SVG group element to hold each axis. You can think of <code>g</code> elements as the SVG equivalent to divs. They're just a container with no inherent size or appearance of their own.</p>
              <p>Inside each of those containers we've called a D3 axis method, passing in one of our scales. We passed our X scale to <code>d3.axisBottom</code> since we want the labels and ticks below the axis line itself. That said, you can probably guess why we used <code>d3.axisLeft</code> for our Y scale.</p>
              <p>You haven't seen <a href="https://github.com/d3/d3-selection#selection_call">selection.call</a> before. You don't really need to understand it right now, but it's basically just a way to enable chained operations on a selection. (If you'd like to know more just hit reply and let me know.)</p>
              <p>We now have markup that looks something like this.</p>
              <div class="highlight html"><pre class="editor editor-colors"><div class="line"><span class="text html basic"><span class="meta tag other html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag other html"><span>svg</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>width</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>600</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>height</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>400</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>style</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>position:&nbsp;absolute;&nbsp;top:&nbsp;0px;&nbsp;left:&nbsp;0px;</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;</span><span class="meta tag other html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag other html"><span>g</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;D3&nbsp;creates&nbsp;the&nbsp;X&nbsp;axis&nbsp;in&nbsp;here&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span><span class="meta tag other html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag other html"><span>g</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;</span><span class="meta tag other html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag other html"><span>g</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;D3&nbsp;creates&nbsp;the&nbsp;Y&nbsp;axis&nbsp;in&nbsp;here&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span><span class="meta tag other html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag other html"><span>g</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span class="meta tag other html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag other html"><span>svg</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div></pre></div>
              <p>Sweet, we've created our axes! Let's take a look!</p>
              <p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fhncwildbyj30h10cbt92.jpg" alt="day5-01"></p>
              <p>Hmm, that's not exactly what we want. The X axis is sitting at the top of our chart, and we can only see the tiniest sliver of Y axis on the left edge of the chart.</p>
              <h2><a id="user-content-moving-the-axes-into-view" class="anchor" href="#moving-the-axes-into-view" aria-hidden="true"></a>Moving the axes into view</h2>
              <p>Like most UI coordinate systems, SVG's default position is the top left corner. This is why the starting point for both of our axes were drawn there, and they're not appearing where we want them.</p>
              <p>Somewhat unique to SVG is that positioning is not done by setting <code>top</code> or <code>left</code> styles. To move our <code>g</code> elements, and therefore the axes constructed inside them, we need to set their <code>transform</code> attribute. What's more, the value of that attribute is a call to a <code>translate</code> function that accepts X and Y coordinates, similar to CSS transforms you may have used before. You can think of <code>translate</code> as an alias for &quot;move&quot;, which is what it really does. Let's update our code to move our axes where we want them.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="variable other object js"><span>svg</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>append</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>g</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>attr</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>transform</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted template js"><span class="punctuation definition string begin js"><span>`</span></span><span>translate(0,&nbsp;</span><span class="source js embedded source"><span class="punctuation section embedded js"><span>${</span></span><span>height&nbsp;</span><span class="keyword operator js"><span>-</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>20</span></span><span class="punctuation section embedded js"><span>}</span></span></span><span>)</span><span class="punctuation definition string end js"><span>`</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>call</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>axisBottom</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>xScale</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>svg</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>append</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>g</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>attr</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>transform</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted template js"><span class="punctuation definition string begin js"><span>`</span></span><span>translate(50,&nbsp;0)</span><span class="punctuation definition string end js"><span>`</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>call</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>axisLeft</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>yScale</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div></pre></div>
              <p>We've now specified that, before drawing our X axis, its containing element should be moved down to 20 pixels above the bottom of our chart as defined by our <code>height</code> property. We've also moved our Y axis 50 pixels to the right. (If you've not seen <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals">template literals</a> before they're just a way to avoid string concatenation in JavaScript.)</p>
              <p>OK, what does our chart look like now?</p>
              <p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fhncwkcpuvj30hd0c6aal.jpg" alt="day5-02"></p>
              <p>Hmm, that's definitely better, but we still have some problems. The axes are right on top of the bars, the X axis is getting cut off on the sides, and the ends of the axes don't meet in a single point like you'd expect.</p>
              <h2><a id="user-content-d3-margin-convention-to-the-rescue" class="anchor" href="#d3-margin-convention-to-the-rescue" aria-hidden="true"></a>D3 Margin Convention to the rescue</h2>
              <p>Since this is such a common problem, the D3 community has settled on a repeatable way to solve it, referred to as the margin convention.</p>
              <p>When creating a D3 chart with axes, convention dictates that we use a <em>margin object</em> to define the amount of space to reserve on each side of the chart for axes.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;we&nbsp;know&nbsp;most&nbsp;of&nbsp;the&nbsp;space&nbsp;we&nbsp;need&nbsp;is&nbsp;below&nbsp;and&nbsp;to&nbsp;the&nbsp;left&nbsp;of&nbsp;the&nbsp;chart</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>margin</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;top</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>10</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;right</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>10</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;bottom</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>20</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;left</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>50</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div></pre></div>
              <p>You then subtract the margins when defining your <code>width</code> and <code>height</code> properties. This is done so their values will hold the actual usable space for the chart.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>width</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>600</span></span><span>&nbsp;</span><span class="keyword operator js"><span>-</span></span><span>&nbsp;</span><span class="variable other object js"><span>margin</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>left</span></span><span>&nbsp;</span><span class="keyword operator js"><span>-</span></span><span>&nbsp;</span><span class="variable other object js"><span>margin</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>right</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>height</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>400</span></span><span>&nbsp;</span><span class="keyword operator js"><span>-</span></span><span>&nbsp;</span><span class="variable other object js"><span>margin</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>top</span></span><span>&nbsp;</span><span class="keyword operator js"><span>-</span></span><span>&nbsp;</span><span class="variable other object js"><span>margin</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>bottom</span></span></span></div></pre></div>
              <p>Here we've updated our existing dimension definitions to include our margins. Given the margin object we defined above, <code>width</code> will now be <code>540</code> and <code>height</code> will be <code>370</code>. This is the amount of space actually available for the bars of our chart.</p>
              <p>(Note that our chart div needs a corresponding amount of padding which we can apply via CSS: <code>padding: 10px 10px 20px 50px;</code>. This is another thing we could avoid with a pure SVG chart.)</p>
              <p>The next step is to create a container that will house both of our axes. This container is positioned according to our <code>left</code> and <code>top</code> margin values, ensuring everything &quot;starts&quot; from the correct position.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>axisContainer</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>svg</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>append</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>g</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>attr</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>transform</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted template js"><span class="punctuation definition string begin js"><span>`</span></span><span>translate(</span><span class="source js embedded source"><span class="punctuation section embedded js"><span>${</span></span><span class="variable other object js"><span>margin</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>left</span></span><span class="punctuation section embedded js"><span>}</span></span></span><span>,&nbsp;</span><span class="source js embedded source"><span class="punctuation section embedded js"><span>${</span></span><span class="variable other object js"><span>margin</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>top</span></span><span class="punctuation section embedded js"><span>}</span></span></span><span>)</span><span class="punctuation definition string end js"><span>`</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div></pre></div>
              <p>This will give us the following markup as our starting point.</p>
              <div class="highlight html"><pre class="editor editor-colors"><div class="line"><span class="text html basic"><span class="meta tag other html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag other html"><span>svg</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>width</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>600</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>height</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>400</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;</span><span class="meta tag any html"><span class="punctuation definition tag html"><span>&lt;</span></span><span class="entity name tag html"><span>g</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>transform</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>translate(50,&nbsp;10)</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag html"><span>&gt;</span><span class="meta scope between-tag-pair html"><span>&lt;</span></span><span>/</span></span><span class="entity name tag html"><span>g</span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span class="meta tag other html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag other html"><span>svg</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div></pre></div>
              <p>With the container in place we can update our axis creation code. We'll create the axes within the container and use our newly calculated <code>height</code> to position the X axis right at the bottom of the chart.</p>
              <div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="variable other object js"><span>axisContainer</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>append</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>g</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>attr</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>transform</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted template js"><span class="punctuation definition string begin js"><span>`</span></span><span>translate(0,&nbsp;</span><span class="source js embedded source"><span class="punctuation section embedded js"><span>${</span></span><span>height</span><span class="punctuation section embedded js"><span>}</span></span></span><span>)</span><span class="punctuation definition string end js"><span>`</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>call</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>axisBottom</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>xScale</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>axisContainer</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>append</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>g</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>call</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>d3</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>axisLeft</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>yScale</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;move&nbsp;this&nbsp;at&nbsp;all&nbsp;now</span><span>&nbsp;</span></span></span></div></pre></div>
              <p>OK, let's take another look.</p>
              <p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fhncwh6rx6j30hh0byt95.jpg" alt="day5-03"></p>
              <p>Now that's what I'm talking about! Nothing is overlapping, the axes meet in the corner, and it looks like a proper bar chart!</p>
              <p>ðŸŽ‰ðŸŽ‰ You've just built a legitimate D3 data visualization! ðŸŽ‰ðŸŽ‰</p>
              <p>Give <a href="https://codepen.io/bclinkinbeard/pen/awrojg?editors=0010">the final product</a> another spin and tinker with it. Change the data, the margins, dimensions, scales, or anything else and see if you can anticipate the output. Tweak the transition durations and delays, maybe specify a different <a href="https://github.com/d3/d3-transition#transition_ease">easing</a> function. You'll notice quickly how robust your code is. You can very easily change any of the presentational aspects of your chart and it remains intact.</p>
              <p>This is the power of driving with data.</p>
              <h2><a id="user-content-thats-it-but-could-i-ask-a-tiny-favor" class="anchor" href="#thats-it-but-could-i-ask-a-tiny-favor" aria-hidden="true"></a>That's it! But could I ask a tiny favor?</h2>
              <p>I would LOVE to hear what you thought about this course, <em>good or bad</em>. My goal is to create the best introduction to D3 in existence, and I can only do that with lots of feedback. It doesn't have to be eloquent or fully thought out! Was there something in particular that was confusing? Did you have any lightbulb moments? Any and all feedback would be massively appreciated.</p>
              <p>Thank you!</p>

            </td>
          </tr>
        </table>
      </div>
    </td>
  </tr>
</table>
</body>
</html>
